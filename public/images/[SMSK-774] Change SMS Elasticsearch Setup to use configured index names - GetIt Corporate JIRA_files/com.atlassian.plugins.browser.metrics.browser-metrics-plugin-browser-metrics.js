/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics-events.js' */
(function(){var d=5;var c=12000;function a(e){return Math.round(e*100)/100}function b(f){var k={};function g(){return f.performance&&f.performance.now?f.performance.now():new Date().getTime()}function m(n){return n===Object(n)}function j(n){if(m(n)){return n.eventName+"."+n.eventType}else{return n}}function l(n){if(m(n)){return n.eventName}else{return n}}function i(n){if(m(n)){return n.eventType}else{return""}}function e(n){var o=j(n);k[o]=g()}function h(q,t){var u=j(q);if(!k[u]){throw ("Error logging browser metrics event end: no start event for key '"+u+"'")}var s=g()-k[u];k[u]=null;var n=l(q),p=i(q);var o="browser.metrics.e."+n+(t?"."+t:""),r={version:d,value:s>c?"x":Math.ceil((s)/100),rawValue:a(s),eventType:p};f.AJS.Analytics?f.AJS.Analytics.triggerPrivacyPolicySafeEvent(o,r):f.AJS.trigger("analyticsEvent",{name:o,data:r})}return{start:e,end:h}}if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initEvents=b}());
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics.js' */
(function(){var e=5;var d=12000;function b(f){return Math.round(f)}function a(f){return Math.round(f*100)/100}function c(j){var g=(function(){var m=/^(\w+):\/\/([^\/]*)(.*)$/;return function(o){var n=o.match(m);if(!n){return{path:o}}return{scheme:n[1],host:n[2],path:n[3]}}}());var h=(function(){var m=["secureConnectionStart","requestStart","responseStart","responseEnd","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventEnd"];return function(n){if(j.performance&&j.performance.getEntries){Array.prototype.forEach.call(j.performance.getEntries(),function(t){if(t.name.match("experimental/main.js")){n("experimentalMainJsDuration",t.duration)}})}if(j.performance){var r=j.performance.timing;var o=r.navigationStart;if(o){for(var q=0;q<m.length;++q){var p=m[q];var s=r[p];if(s){n(p,s-o)}}}}}}());var f=(function(){var n=[{key:"LOGIN",pattern:/^\/login.*/i},{key:"J-DASH",pattern:/^\/secure\/dashboard\.jspa.*/i},{key:"J-ISSUE",pattern:/^\/browse\/\w+\-\w+.*/i},{key:"J-NAV",pattern:/^\/issues.*/i},{key:"J-RAPID",pattern:/secure\/rapidboard\.jspa/i},{key:"SD-AGENT",pattern:/^(\/\w+)?\/servicedesk\/agent\/.*/i},{key:"SD-CUSTOMER",pattern:/^(\/\w+)?\/servicedesk\/customer\/.*/i},{key:"C-DASH",pattern:/^\/wiki(\/)?(\?.*|#.*)?$/i},{key:"C-DASH",pattern:/^\/wiki\/dashboard\.action.*$/i},{key:"C-SPACE",pattern:/^\/wiki\/display\/\w+(\?.*|#.*)?$/i},{key:"C-PAGE",pattern:/^\/wiki\/display\/\w+\/.*/i},{key:"C-PAGE",pattern:/^\/wiki\/pages\/viewpage\.action.*/i},{key:"C-BLOG",pattern:/^\/wiki\/display\/~\w+\/\d+\/\d+\/\d+\/.*/i},{key:"C-EDITOR",pattern:/^\/wiki\/pages\/editpage\.action.*/i},{key:"C-CREATE",pattern:/^\/wiki\/pages\/createpage\.action.*/i}];return function m(){var q=g(j.location.href).path;for(var o=0;o<n.length;++o){var p=n[o];if(q.match(p.pattern)){return p.key}}return null}}());function i(){var m=f();if(m){h(function(o,q){var n="browser.metrics."+o,p={version:e,page:m,value:q>d?"x":Math.ceil((q)/100),rawValue:b(q)};AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(n,p):AJS.trigger("analyticsEvent",{name:n,data:p})})}}function l(){try{i()}catch(m){if(window.console){window.console.log("Error reporting browser metrics: "+m)}}}function k(){if(j.performance.timing.loadEventEnd){l()}else{setTimeout(k,1000)}}if(j.performance&&j.performance.timing){k()}}if(!window.ATL_PERF){window.ATL_PERF={}}window.ATL_PERF.initPageLoad=c}());
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics', location = 'browser-metrics-init.js' */
(function(){if(Math.random()<0.1){window.ATL_PERF&&window.ATL_PERF.initPageLoad&&window.ATL_PERF.initPageLoad(window)}window.ATL_PERF&&window.ATL_PERF.initEvents&&(function(){window.BrowserMetrics=window.ATL_PERF.initEvents(window)}())}());
