/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/Namespaces.js' */
if(typeof GH==="undefined"){window.GH={}}if(typeof GH.view=="undefined"){GH.view={}}if(typeof GH.view.model=="undefined"){GH.view.model={}}if(typeof GH.Global=="undefined"){GH.Global={}}if(typeof GH.Dialog=="undefined"){GH.Dialog={}}if(typeof GH.Dialogs=="undefined"){GH.Dialogs={}}if(typeof GH.State=="undefined"){GH.State={}}if(typeof GH.XBoard=="undefined"){GH.XBoard={}}if(typeof GH.RapidBoard=="undefined"){GH.RapidBoard={}}if(typeof GH.HelpPaths=="undefined"){GH.HelpPaths={}}if(typeof GH.JQLAutoComplete=="undefined"){GH.JQLAutoComplete={}}if(typeof GH.RapidBoard.Util=="undefined"){GH.RapidBoard.Util={}}if(typeof GH.NumberFormat=="undefined"){GH.NumberFormat={}}if(typeof GH.UrlFormat=="undefined"){GH.UrlFormat={}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}AJS.format=function(i){var b=/'(?!')/g,h=/^\d+$/,e=/^(\d+),number$/,c=/^(\d+),choice,(.+)/,g=/^\s*(-?\d+)([#<])(.*)/;var f=function(s,q){var p="",n,j;if(n=s.match(h)){p=q.length>++s?q[s]:""}else{if(n=s.match(e)){j=GH.NumberFormat&&GH.NumberFormat.format||_.identity;p=q.length>++n[1]?j(q[n[1]]):""}else{if(n=s.match(c)){var t=(q.length>++n[1]?q[n[1]]:null);if(t!==null){var u=n[2].split("|");var o=null;for(var m=0;m<u.length;m++){var l=u[m].match(g);if(!l){console.log("Bad formatting of message: "+s);break}var r=parseInt(l[1],10);if(t<r){if(o){p=o;break}else{p=l[3];break}}if(t==r&&l[2]=="#"){p=l[3];break}else{}if(m==u.length-1){p=l[3]}o=l[3]}var k=[p].concat(Array.prototype.slice.call(q,1));p=AJS.format.apply(AJS,k)}}}}return p};var d=function(o){var m=false,j=-1,n=0;for(var l=0;l<o.length;l++){var p=o.charAt(l);if(p=="'"){m=!m}if(m){continue}if(p==="{"){if(n===0){j=l}n++}else{if(p==="}"){if(n>0){n--;if(n===0){var k=[];k.push(o.substring(0,l+1));k.push(o.substring(0,j));k.push(o.substring(j+1,l));return k}}}}}return null};var a=function(m){var k=arguments,l="",j=d(m);while(j){m=m.substring(j[0].length);l+=j[1].replace(b,"");l+=f(j[2],k);j=d(m)}l+=m.replace(b,"");return l};return a.apply(AJS,arguments)};
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/ui/notification/Notification.js' */
GH.Notification={};GH.Notification.showErrors=function(d,a){var b=GH.Notification.prepareNotificationDiv();var c=GH.tpl.rapid.notification.renderErrorMessages(d);if(typeof a=="undefined"){a=true}AJS.messages.error(b,{title:"Error",body:c,closeable:a});if(GH.Notification._divStyle(b)){b.css(GH.Notification._divStyle(b))}b.show()};GH.Notification.showWarnings=function(f,e){var b={autoHide:true,autoHideDelay:5000,preRendered:false,showTitle:false};e=_.extend({},b,e);var c=GH.Notification.prepareNotificationDiv();var a;if(!e.preRendered){a=GH.tpl.rapid.notification.renderErrorMessages({errors:f})}else{a=f}var d={body:a,closeable:true};if(e.showTitle){d.title="Warning"}AJS.messages.warning(c,d);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(e.autoHide){setTimeout(function(){c.hide()},e.autoHideDelay)}};GH.Notification.showWarning=function(b){var a=GH.Notification.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});if(GH.Notification._divStyle(a)){a.css(GH.Notification._divStyle(a))}a.show()};GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()};GH.Notification.handleDateFormatMismatchError=function(c){var b='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';b+="Advanced Settings";b+="</a>";var a=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",b);GH.Notification.showWarnings(a,{autoHide:false,preRendered:true})};GH.Notification.auiMessage=function(b){var a=_.extend({type:"generic",icon:true,messageHtml:false},b);return GH.tpl.rapid.notification.renderAuiMessage({type:a.type,title:a.title,icon:a.icon,messageHtml:a.messageHtml,message:a.message})};GH.Notification.Handler={_defaultNotificationHandler:function(){var a=AJS.$("<div/>");AJS.$(".global-msg").remove();a.addClass("global-msg").appendTo("body");return a},_defaultDivStyleHandler:function(a){return{marginLeft:-a.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(a){this._customDivStyleHandler=a;this._useDefault=false},_useDefault:true,setCustomNotificationHandler:function(a){this._customNotificationHandler=a;this._useDefault=false},removeCustomHandlers:function(){this._useDefault=true},getNotificationHandler:function(){if(!this._useDefault&&this._customNotificationHandler!=null){return this._customNotificationHandler}else{return this._defaultNotificationHandler}},getDivStyleHandler:function(){if(!this._useDefault&&this._customDivStyleHandler!=null){return this._customDivStyleHandler}else{return this._defaultDivStyleHandler}}};GH.Notification._divStyle=function(b){var a=GH.Notification.Handler.getDivStyleHandler();return a(b)};GH.Notification.prepareNotificationDiv=function(){var a=GH.Notification.Handler.getNotificationHandler();return a()};GH.Notification.showSuccess=function(d,b){clearTimeout(GH.Notification.current);var a={timeout:5000,closeable:true,shadowed:true};b=_.extend(a,b,{body:d});var c=GH.Notification.prepareNotificationDiv();AJS.messages.success(c,b);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},b.timeout)};GH.Notification.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){d=c.getItem("selectedIssueId")}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Notification.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Notification.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Notification.showSuccess(b)}};GH.Notification.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Notification._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Notification.showWarning(b);break;case"success":default:GH.Notification.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};GH.Notification.showBoardUpdatedMessage=function(){GH.Notification.clearBoardUpdatedMessage();var b=AJS.$.Deferred();var a=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");a.data("deferred",b);a.find(".js-refresh-now").click(function(c){c.preventDefault();a.removeData("deferred");GH.Notification.clearBoardUpdatedMessage();b.resolve()});a.find(".js-ignore-refresh").click(function(c){c.preventDefault();GH.Notification.clearBoardUpdatedMessage()});AJS.$(".ghx-feedback").css({visibility:"hidden"});return b.promise()};GH.Notification.clearBoardUpdatedMessage=function(){var a=AJS.$("#ghx-update-message");if(a.length){var b=a.data("deferred");if(b&&b.reject){b.reject()}a.remove()}AJS.$(".ghx-feedback").css({visibility:""})};GH.Notification.isBoardUpdatedMessageVisible=function(){var a=AJS.$("#ghx-update-message");return a.length>0};AJS.$(document).ready(function(){GH.Notification.showIssueMessage();if(GH.storage){GH.Notification._displayPageLoadMessages()}});
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.errors.length > 1) {
    output.append('<ul>');
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output.append('<li>', (errorData6.noAutoescape) ? errorData6.message : soy.$$escapeHtml(errorData6.message), '</li>');
    }
    output.append('</ul>');
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output.append('<p>', (errorData18.noAutoescape) ? errorData18.message : soy.$$escapeHtml(errorData18.message), '</p>');
    }
  }
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output.append('<div class="ghx-error">', soy.$$escapeHtml(errorData29.message), '</div>');
  }
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ghx-body-warning">', soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)), ' <a href="', soy.$$escapeHtml(opt_data.docsUrl), '">', soy.$$escapeHtml("See our documentation for the list of supported browsers."), '</a></div>');
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message ', soy.$$escapeHtml(opt_data.type), (opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '', '">', (opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '', (opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? opt_data.message : soy.$$escapeHtml(opt_data.message)) + '</p>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="ghx-update-message" class="ghx-tv-message"><p>', soy.$$escapeHtml("This board has been updated"), ': <a href="" class="js-refresh-now">', soy.$$escapeHtml("Refresh"), '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">', soy.$$escapeHtml("Ignore"), '</a></p></div>');
  return opt_sb ? '' : output.toString();
};

/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/Ajax.js' */
GH.Ajax={};GH.Ajax.CONTEXT_PATH="";GH.Ajax.REST_URL_BASE="/rest/greenhopper/1.0";GH.Ajax.xhrRegistery={};GH.Ajax.stallTimeout=300;GH.Ajax.get=function(a,c){AJS.$.extend(a,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var b=GH.Ajax._executeGet(a,c);return b.pipe(function(d,f,e){return AJS.$.Deferred().resolveWith(this,[d.success,f,e])})};GH.Ajax.post=function(a){a=GH.Ajax._getSettings(a,true);AJS.$.extend(a,{type:"POST",contentType:"application/json"});return GH.Ajax._executeStore(a)};GH.Ajax.put=function(a){a=GH.Ajax._getSettings(a,true);a.type="PUT";return GH.Ajax._executeStore(a)};GH.Ajax.del=function(a){a=GH.Ajax._getSettings(a,true);a.type="DELETE";return GH.Ajax._executeStore(a)};GH.Ajax._getSettings=function(a,b){if(!a.bareUrl&&a.url){a.bareUrl=GH.Ajax.buildRestUrl(a.url)}if(a.bareUrl){a.url=a.bareUrl}if(!a.dataType){a.dataType="json"}if(a.data&&b){a.data=JSON.stringify(a.data)}a.contentType="application/json";return a};GH.Ajax._getXhrData=function(b){var a={timestamp:0};if(b){if(GH.Ajax.xhrRegistery[b]){a=GH.Ajax.xhrRegistery[b]}else{a=GH.Ajax.xhrRegistery[b]=a}}return a};GH.Ajax._executeGet=function(c,g){c=GH.Ajax._getSettings(c);var b=GH.Ajax._getXhrData(g);if(b.xhr){GH.log("aborting request for "+g,GH.Logger.Contexts.ajax);b.xhr.abort();delete b.xhr;delete b.xhrAbort;delete b.timeoutId}var f=b.timestamp;b.timestamp=new Date().getTime();if(b.timestamp-f<GH.Ajax.stallTimeout){GH.log("stalling request for "+g+", time since last request: "+(b.timestamp-f),GH.Logger.Contexts.ajax);var a=AJS.$.Deferred();var e;var d=function(){e=GH.Ajax._executeGet(c,g);e.then(a.resolve,a.reject)};b.timeoutId=window.setTimeout(d,GH.Ajax.stallTimeout);b.xhr=a.promise();b.xhr.abort=function(){if(e){e.abort.apply(e,arguments)}else{clearTimeout(b.timeoutId)}}}else{GH.log("executing request for "+g,GH.Logger.Contexts.ajax);b.xhr=GH.Ajax.makeRequest(c)}b.xhrAbort=b.xhr.abort;b.xhr.abort=function(){var i=b.xhr;var h=b.xhrAbort;if(i&&h){return h.apply(i,arguments)}};b.xhr.done(function(){if(b.xhr){delete b.xhr}}).fail(function(){if(b.xhr){delete b.xhr}});return b.xhr};GH.Ajax._executeStore=function(b){b=b||{};if(b.data&&typeof(b.data)==="string"){if(/\?\?/.test(b.data)){var a="\\u003F\\u003F";b.data=b.data.replace(/\?\?/g,a)}}b.dataType="json";return GH.Ajax.makeRequest(b)};GH.Ajax.makeRequest=function(d){var a=AJS.$.Deferred();d=_.extend(d,{success:function(){a.resolveWith(this,arguments)},error:function(){a.rejectWith(this,arguments)}});var c=a.promise(JIRA.SmartAjax.makeRequest(d));var e=c.abort;c.abort=function(){c.abortMarker=true;return e.apply(c,arguments)};var b=c.pipe(GH.Ajax._generateDoneInterceptor(),GH.Ajax._generateFailInterceptor(d.errorsNoAutoEscape));if(!d.deferErrorHandling){b.fail(GH.Ajax._generateErrorHandler(d.onGlobalError,d.errorContextMap,d.contextualErrorRenderer,d.globalErrorDismissable))}return b};GH.Ajax._generateDoneInterceptor=function(){return function(a,c,b){a=a||{};a=GH.Ajax._createExtendedResult(a);if(!GH.Ajax.matchesCurrentUser(b)){return GH.Ajax._handleCurrentUserChanged(b)}if(!a.isSuccess()){return AJS.$.Deferred().rejectWith(this,[a,b,c,null])}return AJS.$.Deferred().resolveWith(this,[a,c,b])}};GH.Ajax._generateFailInterceptor=function(a){return function(d,h,g){if(d.abortMarker){return AJS.$.Deferred()}if(!GH.Ajax.matchesCurrentUser(d)){return GH.Ajax._handleCurrentUserChanged(d)}var c={},b=null;if(d.responseText){try{c=JSON.parse(d.responseText)}catch(f){}}if(c.errors||c.errorMessages){b=GH.Ajax._convertJiraErrors(c,a)}else{if(c.message){b=GH.Ajax._convertFrameworkErrors(c)}}if(!b){b=GH.Ajax._convertGenericErrors(d,g)}return AJS.$.Deferred().rejectWith(this,[b,d,h,g])}};GH.Ajax.handleContextualErrors=function(b,a,c){a=a||{};if(!b.hasContextualErrors()){return false}AJS.$(b.getContextualErrors()).each(function(e,f){var d=a[f.contextId];if(!d){AJS.$(f.errors).each(function(h,i){b.addGlobalError(i)})}else{if(AJS.$.isFunction(d)){d(f,b)}else{d=AJS.$(d);d.siblings(".ghx-error").remove();var g;if(c){g=c(f)}else{g=GH.tpl.rapid.notification.renderContextualErrors({errors:f.errors})}d.after(g)}}});return true};GH.Ajax.handleGlobalErrors=function(c,b,a){if(!c.hasGlobalErrors()){return false}GH.Notification.showErrors({errors:c.getGlobalErrors()},a);if(b&&(b instanceof Function)){b(c)}return true};GH.Ajax.buildRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.buildBareRestUrl(GH.Ajax.REST_URL_BASE+a)};GH.Ajax.buildBareRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.CONTEXT_PATH+a};GH.Ajax._createExtendedResult=function(a){if(!a){return GH.Ajax._extendResult({success:true})}else{return GH.Ajax._extendResult({success:a})}};GH.Ajax._extendResult=function(a){return AJS.$.extend(a,{getGlobalErrors:function(){return a.error?a.error.errors:null},getContextualErrors:function(){return a.error?a.error.contextualErrors:null},hasGlobalErrors:function(){return a.error&&a.error.errors&&a.error.errors.length>0},hasContextualErrors:function(){return a.error&&a.error.contextualErrors},addGlobalError:function(b){if(!a.error){a.error={}}if(!a.error.errors){a.error.errors=[]}a.error.errors[a.error.errors.length]=b},getSuccessObject:function(){return a.success},isSuccess:function(){return !a.error}})};GH.Ajax._generateErrorHandler=function(d,b,c,a){return function(e){GH.Ajax.handleContextualErrors(e,b,c);GH.Ajax.handleGlobalErrors(e,d,a)}};GH.Ajax._convertJiraErrors=function(a,e){var c=a.errorMessages?a.errorMessages:[];c=_.map(c,function(f){return{message:f,noAutoescape:e}});var b=a.errors?a.errors:{};b=_.map(b,function(g,f){return{contextId:f,errors:[{message:g,noAutoescape:e}]}});var d={error:{errors:c,contextualErrors:b}};return GH.Ajax._extendResult(d)};GH.Ajax._convertFrameworkErrors=function(a){var b={error:{errors:[{message:a.message}],contextualErrors:[]}};return GH.Ajax._extendResult(b)};GH.Ajax._convertGenericErrors=function(b,c){var a=GH.Ajax._extendResult({});if(b.responseText){GH.log("Got an error response with text that we don't know how to parse: "+b.responseText)}if(b.status===0&&c==="abort"){a.addGlobalError({message:"Request timed out"})}else{if(c){a.addGlobalError({message:c})}else{GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging")}}return a};GH.Ajax._hasUsernameResponseHeader=function(a){return !!a.getResponseHeader("X-AUSERNAME")};GH.Ajax._getUserForResponse=function(a){return a.getResponseHeader("X-AUSERNAME")?decodeURIComponent(a.getResponseHeader("X-AUSERNAME")):"anonymous"};GH.Ajax.getUserFromAJS=function(){var a=AJS.Meta.get("remote-user");return a?a:"anonymous"};GH.Ajax.matchesCurrentUser=function(a){return !a.getResponseHeader||!a.getAllResponseHeaders||!GH.Ajax._hasUsernameResponseHeader(a)||GH.Ajax.getUserFromAJS()===GH.Ajax._getUserForResponse(a)||(a.status===204&&!a.getAllResponseHeaders()&&AJS.$.browser.msie)};GH.Ajax._handleCurrentUserChanged=function(c){var b=GH.Ajax.getUserFromAJS();var a=GH.Ajax._getUserForResponse(c);if(b!=="anonymous"&&a==="anonymous"){GH.log("User changed. original: "+b+" new: "+a+". Redirecting to the login page");location.href=GH.RapidBoard.getLoginUrl()}else{GH.log("User changed. original: "+b+" new: "+a+". Reloading the page");location.reload()}return AJS.$.Deferred()};
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/viewissue/QuickCreateIssueInEpic.js' */
GH.QuickCreateIssueInEpic={};GH.QuickCreateIssueInEpic.epicKey=null;GH.QuickCreateIssueInEpic.epicName=null;AJS.$(function(){GH.QuickCreateIssueInEpic.init();JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(c,a,b){if(b===JIRA.CONTENT_ADDED_REASON.pageLoad){GH.QuickCreateIssueInEpic.init()}});AJS.$(document).undelegate("#gh-create-issue-in-epic-lnk","click");AJS.$(document).delegate("#gh-create-issue-in-epic-lnk","click",function(b){var a=GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog();a.show();b.preventDefault()})});GH.QuickCreateIssueInEpic.init=function(){var a=AJS.$("#ghx-epic-key").text();var d=AJS.$("#ghx-epic-name").text();var c=AJS.$("#ghx-hide-table").text()=="true";GH.QuickCreateIssueInEpic.epicKey=a;GH.QuickCreateIssueInEpic.epicName=d;JIRA.unbind("QuickCreateIssueInEpic.sessionComplete");JIRA.bind("QuickCreateIssueInEpic.sessionComplete",function(g,f){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);GH.QuickCreateIssueInEpic.handleIssuesCreated(f)});if(c){var b=AJS.$("#ghx-issues-in-epic-table");b.addClass("hidden")}};GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog=function(){var b=new JIRA.Forms.Container(function(){var d={title:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-in-epic-form",globalEventNamespaces:["QuickCreateIssueInEpic"]};var c=new JIRA.Forms.CreateIssueModel({projectId:d.pid,issueType:d.issueType}),f=new JIRA.Forms.ConfigurableCreateIssueForm({model:c,title:d.title,globalEventNamespaces:d.globalEventNamespaces}),e=new JIRA.Forms.UnconfigurableCreateIssueForm({model:c,title:d.title,globalEventNamespaces:d.globalEventNamespaces});return{globalEventNamespaces:d.globalEventNamespaces,model:c,errorHandler:new JIRA.Forms.CreateIssueError(),configurableForm:f,unconfigurableForm:e}});b.bind("contentRefreshed",function(){AJS.$(document).unbind("QuickCreateIssueInEpic.validationError");AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(d,c){c.setSelection(new AJS.ItemDescriptor({value:"key:"+GH.QuickCreateIssueInEpic.epicKey,label:GH.QuickCreateIssueInEpic.epicName}));setTimeout(function(){c.disable()},0);AJS.$(document).bind("QuickCreateIssueInEpic.validationError",function(f){c.disable()})})});var a=b.asDialog({windowTitle:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-dialog"});a.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).unbind("QuickCreateIssueInEpic.validationError")});return a};GH.QuickCreateIssueInEpic.handleIssuesCreated=function(b){var a=_.pluck(b,"issueKey");GH.QuickCreateIssueInEpic.addIssuesToEpic(b).done(function(){GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable(a)})};GH.QuickCreateIssueInEpic.addIssuesToEpic=function(b){var a=_.pluck(b,"issueKey");var c={ignoreEpics:true,issueKeys:a};return GH.Ajax.put({url:"/epics/"+GH.QuickCreateIssueInEpic.epicKey+"/add",data:c})};GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable=function(a){var b=AJS.$("#greenhopper-epics-issue-web-panel");b.addClass("updating");AJS.$.ajax({url:contextPath+"/secure/ViewIssuesInEpic.jspa?epicKey="+GH.QuickCreateIssueInEpic.epicKey}).done(function(d){b.find(".mod-content").html(d);JIRA.Dropdowns.bindIssueActionsDds(b);AJS.$.each(a,function(g,f){b.find(".issuerow[data-issuekey='"+f+"']").fadeInBackground()});var c=AJS.$("#ghx-issues-in-epic-table");var e=AJS.$("#ghx-hide-table").text()=="true";if(e){c.addClass("hidden")}else{AJS.$("#ghx-issues-in-epic-empty-message").remove();c.removeClass("hidden")}b.removeClass("updating")})};
